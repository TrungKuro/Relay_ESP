<!-- CSS Selector Reference -> https://www.w3schools.com/cssreF/css_selectors.php -->
<!-- CSS ::before Selector -> https://www.w3schools.com/csSref/sel_before.php -->
<!-- How TO - Display Text when Checkbox is Checked -> https://www.w3schools.com/howto/howto_js_display_checkbox_text.asp -->

<!DOCTYPE HTML>
<html>

<head>
  <title>Demo Relay ESP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
  <style>
    html {
      font-family: Arial;
      display: inline-block;
      margin: 0px auto;
      text-align: center;
    }

    body {
      max-width: 600px;
      margin: 0px auto;
      padding-bottom: 25px;
    }

    /* RELAY */

    .switch {
      position: relative;
      display: inline-block;
      width: 120px;
      height: 68px
    }

    .switch input {
      display: none
    }

    .slider {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      border-radius: 6px
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 52px;
      width: 52px;
      left: 8px;
      bottom: 8px;
      background-color: #fff;
      -webkit-transition: .4s;
      transition: .4s;
      border-radius: 3px
    }

    input:checked+.slider {
      background-color: #b30000
    }

    input:checked+.slider:before {
      -webkit-transform: translateX(52px);
      -ms-transform: translateX(52px);
      transform: translateX(52px)
    }
  </style>
</head>

<body>
  <h1>ESP8266 Relay (RTC) Server</h1>

  <h2>TIME - <span id="time">%TIME%</span></h2>
  <h2>DATE - <span id="date">%DATE%</span></h2>

  <p>
  <h3>RELAY 1 - <span id="relay1">%RELAY1%</span></h3>
  <label class="switch">
    <input type="checkbox" onchange="toggleCheckbox(this)" id="4">
    <span class="slider"></span>
  </label>
  </p>

  <p>
  <h3>RELAY 2 - <span id="relay2">%RELAY2%</span></h3>
  <label class="switch">
    <input type="checkbox" onchange="toggleCheckbox(this)" id="5">
    <span class="slider"></span>
  </label>
  </p>

  <p>
  <h3>RELAY 3 - <span id="relay3">%RELAY3%</span></h3>
  <label class="switch">
    <input type="checkbox" onchange="toggleCheckbox(this)" id="12">
    <span class="slider"></span>
  </label>
  </p>

  <p>
  <h3>RELAY 4 - <span id="relay4">%RELAY4%</span></h3>
  <label class="switch">
    <input type="checkbox" onchange="toggleCheckbox(this)" id="13">
    <span class="slider"></span>
  </label>
  </p>
</body>

<script>
  /* Send data state of RELAY (HTTP GET) to ESP */
  function toggleCheckbox(element) {
    var xhr = new XMLHttpRequest();
    if (element.checked) {
      xhr.open("GET", "/update?output=" + element.id + "&state=0", true);
    }
    else {
      xhr.open("GET", "/update?output=" + element.id + "&state=1", true);
    }
    xhr.send();
  };

  /* Get data state from RELAY 1 */
  setInterval(function () {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("relay1").innerHTML = this.responseText;
        if (document.getElementById("relay1").textContent == "ON") {
          document.getElementById("4").checked = true;
        }
        else {
          document.getElementById("4").checked = false;
        }
      }
    };
    xhttp.open("GET", "/relay1", true);
    xhttp.send();
  }, 50);

  /* Get data state from RELAY 2 */
  setInterval(function () {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("relay2").innerHTML = this.responseText;
        if (document.getElementById("relay2").textContent == "ON") {
          document.getElementById("5").checked = true;
        }
        else {
          document.getElementById("5").checked = false;
        }
      }
    };
    xhttp.open("GET", "/relay2", true);
    xhttp.send();
  }, 50);

  /* Get data state from RELAY 3 */
  setInterval(function () {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("relay3").innerHTML = this.responseText;
        if (document.getElementById("relay3").textContent == "ON") {
          document.getElementById("12").checked = true;
        }
        else {
          document.getElementById("12").checked = false;
        }
      }
    };
    xhttp.open("GET", "/relay3", true);
    xhttp.send();
  }, 50);

  /* Get data state from RELAY 4 */
  setInterval(function () {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("relay4").innerHTML = this.responseText;
        if (document.getElementById("relay4").textContent == "ON") {
          document.getElementById("13").checked = true;
        }
        else {
          document.getElementById("13").checked = false;
        }
      }
    };
    xhttp.open("GET", "/relay4", true);
    xhttp.send();
  }, 50);

  /* Get data TIME from RTC */
  setInterval(function () {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("time").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET", "/time", true);
    xhttp.send();
  }, 1000);

  /* Get data DATE from RTC */
  setInterval(function () {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("date").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET", "/date", true);
    xhttp.send();
  }, 1000);
</script>

</html>